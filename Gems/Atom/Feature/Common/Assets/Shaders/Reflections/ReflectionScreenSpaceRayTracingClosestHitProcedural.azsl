/*
 * Copyright (c) Contributors to the Open 3D Engine Project.
 * For complete copyright and license terms please see the LICENSE at the root of this distribution.
 *
 * SPDX-License-Identifier: Apache-2.0 OR MIT
 *
 */

#include "ReflectionScreenSpaceRayTracingClosestHit.azsli"
#include <Atom/Features/RayTracing/RayTracingIntersectionAttributes.azsli>

// TODO(intersection): Implement multiple closesthit-shaders per source file
[shader("closesthit")]
void ClosestHitProcedural(inout PayloadData payload, ProceduralGeometryIntersectionAttributes attrib)
{
    VertexData vertexData;
    vertexData.m_position = attrib.m_position;
    vertexData.m_normal = attrib.m_normal;
    vertexData.m_tangent = float4(1, 0, 0, 1);
    vertexData.m_bitangent = float3(1, 0, 0);
    vertexData.m_uv = attrib.m_uv;

    ScreenSpaceClosestHitImpl(payload, vertexData, transpose(ObjectToWorld4x3()));
}
